# 2048 Game - WasiCore Framework 实现

## 🎮 游戏简介

这是一个在WasiCore框架中实现的精美2048游戏，采用现代扁平化设计风格，具有丰富的视觉效果和流畅的动画。

## ✨ 游戏特色

### 🎨 美化设计
- **现代扁平化UI**: 采用温暖配色方案，视觉效果舒适
- **渐变色彩**: 每个数字方块都有独特的渐变色彩
- **立体效果**: 方块带有阴影和高光，增加视觉深度
- **简洁数字显示**: 使用几何形状表示数字（7段数码管风格）

### 🎬 动画效果
- **滑动动画**: 方块移动时的平滑过渡效果
- **合并动画**: 方块合并时的弹性缩放动画
- **粒子系统**: 
  - 新方块出现时的星光粒子
  - 方块合并时的庆祝粒子
- **缓动函数**: 使用三次贝塞尔曲线使动画更自然

### 🎮 游戏功能
- **多种输入方式**: 
  - 键盘方向键（WASD 或 方向键）
  - 触摸/鼠标拖拽滑动
- **撤销功能**: 支持撤销上一步操作
- **分数统计**: 实时显示当前分数和最高分数
- **游戏状态**: 
  - 胜利提示（达到2048）
  - 游戏结束检测
  - 新游戏重开

### 🔧 技术特点
- **纯Canvas绘制**: 使用WasiCore的Canvas API实现所有图形
- **高性能动画**: 使用IThinker接口进行平滑的帧更新
- **响应式设计**: 自适应不同屏幕尺寸
- **WebAssembly优化**: 遵循WasiCore框架的最佳实践

## 🕹️ 游戏操作

### 键盘控制
- `W` / `↑` - 向上滑动
- `A` / `←` - 向左滑动  
- `S` / `↓` - 向下滑动
- `D` / `→` - 向右滑动
- `R` - 重新开始游戏
- `Ctrl + Z` - 撤销上一步

### 触摸/鼠标控制
- 在游戏区域拖拽滑动即可控制方向
- 点击"New Game"按钮重新开始
- 点击"Undo"按钮撤销操作

## 🏗️ 架构设计

### 文件结构
```
Game2048/
├── Game2048.cs          # 主游戏逻辑
└── README.md            # 说明文档
```

### 核心类设计
- `Game2048`: 主游戏类，实现`IGameClass`和`IThinker`
- `TileAnimation`: 方块移动动画
- `MergeAnimation`: 方块合并动画  
- `Particle`: 粒子效果

### 游戏状态管理
- 网格数据：4x4整数数组
- 分数系统：当前分数 + 历史最高分
- 动画系统：独立的动画状态管理
- 输入处理：统一的输入事件处理

## 🎯 游戏规则

1. **移动**: 选择方向滑动，所有方块向该方向移动
2. **合并**: 相同数字的方块碰撞时会合并为翻倍的数字
3. **生成**: 每次移动后会随机生成新方块（90%概率生成2，10%概率生成4）
4. **胜利**: 成功合并出2048方块即为胜利
5. **失败**: 棋盘填满且无法移动时游戏结束

## 🎨 视觉设计

### 配色方案
- 背景色：温暖的米白色 `#FAF8EF`
- 空方块：浅灰色 `#CDC1B4`  
- 数字2：米白色 `#EEE4DA`
- 数字4：浅黄色 `#EDE0C8`
- 数字8-64：橙色到红色渐变
- 数字128+：金黄色系
- 数字2048：目标金色 `#EDC22E`

### 动画细节
- 移动动画：300ms，三次贝塞尔缓动
- 合并动画：弹性缩放，先放大到1.2倍再缩回
- 粒子效果：带重力的抛物线运动，渐变透明度

## 🚀 运行方式

1. 在GlobalConfig.cs中设置测试模式：
   ```csharp
   GameDataGlobalConfig.TestGameMode = ScopeData.GameMode.Game2048;
   ```

2. 编译项目：
   ```bash
   ./build_game.sh
   ```

3. 启动WasiCore引擎，游戏将自动加载

## 📈 性能优化

- **对象池**: 复用动画和粒子对象，减少GC压力
- **增量渲染**: 只在状态变化时重新绘制
- **批量操作**: 合并多个绘制操作减少API调用
- **内存管理**: 及时清理过期的动画和粒子

## 🔮 未来扩展

- [ ] 音效系统（方块移动、合并、胜利音效）
- [ ] 更多粒子特效（彩虹粒子、烟花效果）
- [ ] 自定义主题（夜间模式、节日主题）
- [ ] 排行榜系统
- [ ] 更大尺寸版本（5x5, 6x6）
- [ ] 联机对战模式

---

**开发框架**: WasiCore (星火编辑器SCE)  
**开发语言**: C# 9.0  
**运行环境**: WebAssembly  
**设计风格**: 现代扁平化设计  